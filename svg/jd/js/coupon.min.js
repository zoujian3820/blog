/*! m_rankistNew 2017-10-18 */
function toastSuccess() {
    $.toast({message: "领取成功", cls: "succee-icon", delay: 3e3})
}
function toastError() {
    $.toast({message: "领取失败", cls: "error-icon", delay: 3e3})
}
function toast(a) {
    $.toast({message: a, cls: "error-icon", delay: 3e3})
}
function couponFail(a) {
    $(".popup03").show(), $(".captchas-fail-tip").css({marginTop: -$(".captchas-fail-tip").height() / 2}), $(".captchas-fail-tip").show(), $(".captchas-fail-tip>div>span").html(a), $(".captchas-fail-btn").unbind("click").bind("click", function () {
        $(".popup03").hide(), $(".captchas-fail-tip").hide()
    })
}
function ver() {
    $(".verification").show(), $(".ver-con").css({top: ($(window).height() - $(".ver-con").height()) / 2})
}
function showAlert() {
    var a = document.documentElement.scrollTop || document.body.scrollTop, b = document.documentElement.scrollHeight || document.body.scrollHeight;
    $(".popup04").show(), $(".popup04").css("height", b), $(".captchas-tip").css({marginTop: a - 91 + "px"}), $(".captchas-tip").show()
}
function hideWindow() {
    $(".popup04").hide(), $(".captchas-input").val(""), $(".tip-warn").html(""), $(".captchas-fixed").hide(), $(".captchas-wrapper").hide(), $(".captchas-tip").hide()
}
function urlencode(a) {
    return a = (a + "").toString(), encodeURIComponent(a).replace(/!/g, "%21").replace(/'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/\*/g, "%2A").replace(/%20/g, "+")
}
function com_jd_passport_m_validateCode(a, b, c) {
    validateCode.getValidateCode(a, b, c)
}
!function (a) {
    var b = a.M = a.M || {}, c = {
        $mObj: {}, merge: function (a, b, d) {
            if (!a || !b || "object" != typeof b)return a;
            if (d) {
                var e, f;
                for (e in b)b.hasOwnProperty(e) && (f = b[e], f && f.constructor === Object && a[e] && a[e].constructor === Object ? c.merge(a[e], f) : a[e] = f)
            } else for (var g in b)a[g] = b[g];
            return a
        }, clone: function (a, b) {
            return c.merge({}, a, b)
        }, namespace: function () {
            var b, d, e, f, g, h, i = a;
            for (e = 0, g = arguments.length; e < g; e++) {
                var j = arguments[e];
                if (!c.$mObj.namespace[j]) {
                    for (b = j.split("."), f = 0, h = b.length; f < h; f++)d = b[f], i[d] || (i[d] = {}), i = i[d];
                    c.$mObj.namespace[j] = !0
                }
            }
        }, extend: function () {
            var a = function (a) {
                for (var b in a)a.hasOwnProperty(b) && (this[b] = a[b])
            };
            return function (b, c) {
                "function" == typeof b || (b = function () {
                });
                var d = function () {
                    b.apply(this, arguments)
                }, e = function () {
                };
                return e.prototype = b.prototype, d.prototype = new e, d.prototype.constructor = d, d.superclass = b.prototype, b.prototype.constructor === Object.prototype.constructor && (b.prototype.constructor = b), d.override = function (a) {
                    if (d.prototype && a && "object" == typeof a)for (var b in a)d.prototype[b] = a[b]
                }, d.prototype.override = a, d.override(c), d
            }
        }(), "extends": function (a, b) {
            for (var c in b)void 0 !== b[c] && (a[c] = b[c])
        }, each: function (a, d, e) {
            if (!c.isEmpty(a) && d)if (c.isArray(a))for (var f = 0, g = a.length; f < g; f++)try {
                if (d.call(e, a[f], f, a) === !1)return
            } catch (h) {
                b.log(h, "error")
            } else for (var i in a)if (a.hasOwnProperty(i))try {
                if (d.call(e, a[i], i, a) === !1)return
            } catch (h) {
                b.log(h, "error")
            }
        }, contains: function (a, b) {
            if (c.isArray(a)) {
                if ("indexOf" in Array.prototype)return a.indexOf(b) !== -1;
                var d, e;
                for (d = 0, e = a.length; d < e; d++)if (a[d] === b)return !0;
                return !1
            }
            return !c.isEmpty(a) && b in a
        }, isEmpty: function (a, b) {
            if ("undefined" == typeof a || null === a || !b && "" === a || c.isArray(a) && 0 === a.length)return !0;
            if (c.isObject(a)) {
                for (var d in a)if (Object.prototype.hasOwnProperty.call(a, d))return !1;
                return !0
            }
            return !1
        }, isBlank: function (a) {
            return !!c.isEmpty(a) || c.isEmpty(String(a).replace(/^\s+|\s+$/g, ""))
        }, isDefined: function (a) {
            return "undefined" == typeof a
        }, isObject: function (a) {
            return "[object Object]" === Object.prototype.toString.call(null) ? null !== a && void 0 !== a && "[object Object]" === Object.prototype.toString.call(a) && void 0 === a.ownerDocument : "[object Object]" === Object.prototype.toString.call(a)
        }, isFunction: function (a) {
            return "[object Function]" === Object.prototype.toString.apply(a)
        }, isArray: function (a) {
            return "[object Array]" === Object.prototype.toString.apply(a)
        }, isDate: function (a) {
            return "[object Date]" === Object.prototype.toString.apply(a)
        }, isNumber: function (a) {
            return "number" == typeof a && isFinite(a)
        }, isString: function (a) {
            return "string" == typeof a
        }, isBoolean: function (a) {
            return "boolean" == typeof a
        }
    };
    b.object = c
}(window), function (a) {
    var b = a.M = a.M || {}, c = {
        getParam: function (a) {
            var b = new RegExp("(^|&)" + a + "=([^&]*)(&|$)", "i"), c = window.location.search.substr(1).match(b);
            return null != c ? decodeURI(c[2]) : null
        }, setParams: function (a) {
            var b = window.location.search, c = "", d = new Array, e = {};
            if (!ObjectUtil.isObject(a))throw new Error("arguments is not a jsonobject");
            if (b.indexOf("?") != -1 && (c = b.substr(b.indexOf("?") + 1)), c.length > 0) {
                var f = c.split("&");
                for (i in f) {
                    var g = f[i].split("=");
                    g.length > 1 ? e[g[0]] = g[1] : e[g[0]] = ""
                }
                ObjectUtil.merge(e, a)
            } else e = a;
            for (key in e)d.push(key), d.push("="), d.push(a[key]), d.push("&");
            d.pop(), window.location.search = d.jion()
        }, getHash: function () {
            var a = window.location.hash;
            return a ? a.replace("#", "") : void 0
        }, setHash: function (a) {
            a ? window.location.hash = "#" + a : window.location.hash = ""
        }, sendPing: function (a, b, c, d, e) {
            try {
                var f = new MPing.inputs.Click(a);
                f.event_param = b, f.page_name = c, f.page_param = d, null != e && void 0 != e && "" != e && (f.event_level = e), f.updateEventSeries();
                var g = new MPing;
                g.send(f), MPing.inputs.Click.attachEvent()
            } catch (h) {
            }
        }
    };
    b.url = c
}(window), function (a) {
    var b = a.M = a.M || {}, c = b.object;
    b.modules = {}, b.runMod = [], b.config = {debug: 0}, b.log = function (a, c) {
        b.config && b.config.debug && "undefined" != typeof console && null !== console && console[c || (c = "log")] && console[c](a)
    };
    var d = {
        require: function (a, b) {
            !c.isArray(a) && (a = Array(a)), d.loadJs(a, b)
        }, loadJs: function (a, b) {
            $LAB.setOptions({AlwaysPreserveOrder: !0}).script(a).wait(function () {
                b && b.call(null)
            })
        }, exports: function (a) {
            return b.modules[a] && b.modules[a].exports ? b.modules[a].exports : null
        }, define: function (a, d) {
            return 1 == arguments.length && (d = a), c.isEmpty(a) && b.isFunction(d) ? void d.call(null) : (!b.modules[a] && (b.modules[a] = {}), void(b.modules[a].factory = d))
        }, defineModule: function () {
            c.each(b.modules, function (a, c) {
                var d = b.modules[c];
                if (!d.exports && d.factory) {
                    d.exports = {};
                    var e = d.factory.call(null, d.exports);
                    e && (d.exports = e)
                }
            })
        }, setRunMod: function (a, d) {
            c.isArray(a) ? d ? b.runMod = a : b.runMod = b.runMod.concat(a) : c.isString(a) && !c.isBlank(a) && (d ? b.runMod = [a] : b.runMod.push(a))
        }, setConfig: function (a, b) {
            d.setGlobalProp("config", a, b)
        }, setGlobalProp: function (a, d, e) {
            var f = b[a];
            if (c.isString(d))return void(f[d] = e);
            if (c.isObject(d)) {
                var g = d;
                c.each(g, function (b, c) {
                    setGlobalProp(a, c, b)
                })
            }
        }, idSeed: 0, genId: function (a) {
            var b = (a || "mGen") + ++d.idSeed;
            return b
        }, runner: function (a) {
            d.defineModule();
            var e = !1;
            c.isObject(a) && (e = !0), c.each(b.runMod, function (f) {
                var g = e && a[f] ? a[f] : null;
                if (d.exports(f)) {
                    var h = d.exports(f), i = h.clazz ? new h.clazz(g) : h;
                    if (c.isFunction(i.run))try {
                        i.run()
                    } catch (j) {
                        b.log(j, "error")
                    }
                }
            })
        }
    };
    b.require = function () {
        return d.require.apply(null, arguments)
    }, b.genId = function () {
        return d.genId.apply(null, arguments)
    }, b.define = function () {
        return d.define.apply(null, arguments)
    }, b.runner = function () {
        return d.runner.apply(null, arguments)
    }, b.setConfig = function () {
        return d.setConfig.apply(null, arguments)
    }, b.setRunMod = function () {
        return d.setRunMod.apply(null, arguments)
    }, b.exports = function () {
        return d.exports.apply(null, arguments)
    }
}(window), function (a) {
    var b = a.M = a.M || {}, c = function () {
        function a(a) {
            var b = null;
            return g && a && (b = window.localStorage.getItem(a)), b
        }

        function d(a, b) {
            if (g && a)try {
                window.localStorage.setItem(a, b)
            } catch (d) {
                c.removeAll(), window.localStorage.setItem(a, b)
            }
        }

        function e(a) {
            g && a && window.localStorage.removeItem(a)
        }

        function f() {
            g && window.localStorage.clear()
        }

        var g = !!window.localStorage;
        if (g) {
            try {
                window.localStorage.setItem("M_test", 1)
            } catch (h) {
                g = !1, b.log("localStorage�޷�set", "error")
            }
            try {
                window.localStorage.getItem("M_test")
            } catch (h) {
                g = !1, b.log("localStorage�޷�get", "error")
            }
            try {
                window.localStorage.removeItem("M_test")
            } catch (h) {
                g = !1, b.log("localStorage�޷�remove", "error")
            }
        }
        return {get: a, set: d, remove: e, removeAll: f}
    };
    b.localstorage = new c
}(window), M.define("swip_head", function (a) {
    var b = function (a) {
        this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            var b, c = this, d = a || {}, e = "swip_head";
            c.defaults = {
                headData: [],
                startIndex: 0,
                autoScroll: !1,
                callback: null,
                swipendfn: null,
                clickBoforefn: null,
                clickAfterfn: null,
                isStaticWidth: !1,
                defualtFontSize: 16,
                showLen: 4.5,
                marginLen: 2,
                right: 45,
                tag: "discount",
                moveIndex: 0,
                hasHtml: !1,
                delay: 500
            }, M.object["extends"](c.defaults, d), c.sourceId = M.genId(e), c.flagId = c.defaults.tag, c.clientW = document.documentElement.clientWidth || document.body.clientWidth, c.clientW > 640 && (c.clientW = 640), (0 != c.defaults.headData.length || c.defaults.hasHtml) && (c.defaults.hasHtml || $("#chooseHead").append(c.html()), b = setTimeout(function () {
                c.fContainer = document.querySelector("#fixed-nav"), c.container = document.querySelector("#fixed-nav .choose-nav-wrap"), c.arrLi = document.querySelectorAll(".choose-nav-wrap li"), c.$navLi = document.querySelectorAll("#fixed-nav li"), c.defaults.isStaticWidth || c.setLiWidth(), c.makeItemsMove(), cateId = $(".choose-nav-wrap li").eq(c.defaults.startIndex).find("span.pos-re").attr("cateid"), c.swipMove(c.defaults.startIndex, ""), c.defaults.startIndex != $("#firstCatergryId").val() /*&& $(".tab-jingxuan").removeClass("active")*/, clearTimeout(b)
            }, 10))
        }, html: function () {
            var a = this, b = [];
            if (0 != a.defaults.headData.length && !a.defaults.hasHtml) {
                b.push('<div class="choose-pannel">'), b.push('<nav id="' + a.sourceId + '" class="choose-nav-ht" >'), b.push('<div id="fixed-nav" class="choose-nav">'), b.push('<ul  class="choose-nav-wrap half-bottom-line" style="-webkit-transform:translateX(0px);transform:translateX(0px);">');
                for (var c = 0; c < a.defaults.headData.length; c++)0 == c ? b.push('<li class="choose-nav-iteam active"><p><span class="pos-re" cateId="' + a.defaults.headData[c].cateId + '">' + a.defaults.headData[c].cateName + "</span></p></li>") : (b.push('<li class="choose-nav-iteam"><p><span class="pos-re" cateId="' + a.defaults.headData[c].cateId + '">' + a.defaults.headData[c].cateName), b.push("</span></p></li>"));
                b.push('<li class="choose-nav-iteam li-space"></li><li class="nv-bg"></li></ul>'), b.push("</div></nav></div>")
            }
            return b.join("")
        }, addClick: function (a, b) {
            var c, d = this;
            a.addEventListener("click", function (b) {
                return function () {
                    c = $(a).find("span.pos-re").attr("cateid"), d.swipMove(b, "click")
                }
            }(b))
        }, bind: function () {
            for (var a = this, b = a.arrLi, c = 0; c < b.length - 1; c++)a.addClick(b[c], c)
        }, checkCate: function (a, b) {
            try {
                var c = this, d = M.localstorage.get(c.flagId + "_headData"), e = [];
                if (null == d) {
                    for (var f = 0; f < a.length; f++)e.push(a[f].cateName);
                    return M.localstorage.set(c.flagId + "_headData", e.join("|")), !1
                }
                return d.indexOf(b) == -1
            } catch (g) {
                return !1
            }
        }, setMoveDistance: function (a, b) {
            var c = this.container.getBoundingClientRect().width || this.container.offsetWidth, d = this.clientW, e = Math.ceil(c - d);
            a > 0 && (a = 0), a <= e * -1 && (a = e * -1), this.container.style.WebkitTransform = "translateX(" + a + "px)", this.container.style.transform = "translateX(" + a + "px)", this.container.style.transition = b + " all ease-out", this.container.style.WebkitTransition = b + " all ease-out"
        }, makeItemsMove: function () {
            var a = this, b = this.container.getBoundingClientRect().width || this.container.offsetWidth, c = document.documentElement.clientWidth || document.body.clientWidth;
            b <= c || (this.container.addEventListener("touchstart", function (b) {
                function c(b) {
                    b.preventDefault(), i = b.changedTouches[0].clientX, o += i - h, h = i, a.setMoveDistance(o, "0s")
                }

                function d(b) {
                    e = +new Date, g = b.changedTouches[0].clientX;
                    var h = g - f, i = e - j, k = Math.abs(h / i);
                    k > .5 && (n += 2 * h, a.setMoveDistance(n, "0.5s")), (h > 1 || h < -1) && a.defaults.swipendfn && a.defaults.swipendfn(), a.container.removeEventListener("touchmove", c, !1), a.container.removeEventListener("touchend", d, !1)
                }

                var e, f, g, h, i, j = +new Date, k = a.container.style.MozTransform || a.container.style.MsTransform || a.container.style.WebkitTransform || a.container.style.transform, l = /\d+(\.)?(\d+)?/, m = k.match(l)[0], n = m ? -1 * parseInt(m) : 0, o = n;
                f = h = b.changedTouches[0].clientX, a.container.addEventListener("touchmove", c, !1), a.container.addEventListener("touchend", d, !1)
            }, !1), a.bind())
        }, remToPx: function (a) {
            return this.clientW / 320 * this.defaults.defualtFontSize * a
        }, pxToRem: function (a) {
            return parseFloat(a) / parseFloat(this.clientW / 320 * this.defaults.defualtFontSize)
        }, setLiWidth: function () {
            var a, b = this.arrLi, c = this.defaults.marginLen * Math.ceil(this.defaults.showLen);
            this.liW = Math.ceil(parseFloat(this.clientW - c) / this.defaults.showLen);
            for (var d = 0; d < b.length; d++)a = b[d].className, a.indexOf("li-space") != -1 ? b[d].style.width = this.defaults.right + "px" : (b[d].style.width = this.liW + "px", b[d].style.marginRight = this.defaults.marginLen + "px")
        }, swipMove: function (a, b) {
            var c = this, d = c.defaults.headData, e = this.arrLi, f = this.defaults.marginLen, g = this.liW || e[0].offsetWidth, h = (g + f) * a, i = (g + f) * c.defaults.moveIndex, j = (this.fContainer.offsetWidth, this.container.style.webkitTransform || this.container.style.transform);
            parseFloat(j.match(/[0-9]+/)[0]);
            c.defaults.clickBoforefn && b && c.defaults.clickBoforefn(), this.setMoveDistance(-(h - i), c.defaults.delay + "ms"), $(".choose-nav .nv-bg").css({
                "-webkit-transform": "translate3d(" + (h + f) + "px,0,0)",
                "-webkit-transition": c.defaults.delay + "ms"
            });
            for (var k = 0; k < this.$navLi.length; k++)a == k ? this.$navLi[k].className = "choose-nav-iteam active" : $(this.$navLi[k]).removeClass("active");
            this.defaults.callback && this.defaults.callback({
                index: a,
                maxNum: e.length,
                actionType: b,
                liName: d[a + 1]
            })
        }, show: function () {
            var a = this;
            $("#" + a.sourceId).removeClass("header-absolute")
        }, hide: function () {
            var a = this;
            $("#" + a.sourceId).addClass("header-absolute")
        }
    }), a.clazz = b
}), M.define("img_loading", function (a) {
    var b = function (a) {
        this.markNum = 0, this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            var b = this, c = a || {};
            b.defaults = {
                scrollObj: window,
                refreshTimer: null,
                duration: 300,
                _src: "_src",
                container: "imgContainer",
                rangeH: 0,
                animationName: "fade",
                showDelay: "200ms",
                styleContianer: "styleID",
                errorImgSrc: ""
            }, M.object["extends"](b.defaults, c), b.duration = b.defaults.duration, b.container = b.defaults.container, b._src = b.defaults._src, b.rangeH = b.defaults.rangeH, b.animationName = b.defaults.animationName, b.showDelay = b.defaults.showDelay, b.styleContianer = b.defaults.styleContianer, b.scrollObj = b.defaults.scrollObj, b.baseId = "img_loading", b.refreshTimer && (clearTimeout(self.refreshTimer), b.refreshTimer = null), b.loading(), b.bind()
        }, bind: function () {
            var a = this;
            $(a.scrollObj).on("scroll", function () {
                a.refreshTimer && (clearTimeout(a.refreshTimer), a.refreshTimer = null), a.refreshTimer = setTimeout(function () {
                    a.loading()
                }, a.duration)
            })
        }, belowthefold: function (a) {
            var b = this;
            return $(window).scrollTop() - b.rangeH <= $(a).offset().top
        }, abovethetop: function (a) {
            var b = this;
            return $(a).offset().top <= $(window).scrollTop() + document.documentElement.clientHeight + b.rangeH
        }, inViewport: function (a) {
            var b = this;
            return b.belowthefold(a) && b.abovethetop(a)
        }, setStyle: function (a, b) {
            for (var c in b)a.style[c] = b[c]
        }, checkIphone: function () {
            var a = window.navigator.userAgent.toLowerCase();
            return !!/iphone|ipd|ipod/.test(a)
        }, addStyle: function () {
            var a = document.getElementById(this.styleContianer) || document.getElementsByTagName("head")[0], b = document.createElement("style");
            b.innerHTML += " @-webkit-keyframes fade { 0%   { opacity: 0; } 100%   { opacity: 1; }} @keyframes fade {  0%   { opacity: 0; }  100%   { opacity: 1; }}", a.appendChild(b)
        }, loading: function () {
            var a = this, b = [], c = document.getElementById(a.container);
            b = c ? $(c).find("img[" + a._src + "]") : $("img[" + a._src + "]"), b.each(function (c) {
                var d = b.eq(c);
                a.inViewport(d) && a.changSrc($(d[0]))
            })
        }, setImgURL: function (a) {
            var b = this, c = a.attr("" + b._src), d = 2 * parseInt(a.width()), e = 2 * parseInt(a.height());
            return c = c.replace(/(s[0-9]{0,4}x[0-9]{0,4}_)?jfs/, "s" + d + "x" + e + "_jfs"), c.indexOf(".webp") != -1 || b.checkIphone() || (c += ".webp"), c
        }, changSrc: function (a) {
            var b = this, c = a.attr("" + b._src), d = new Image, e = b.setImgURL(a);
            a.css("opacity", 0), d.src = e, d.onload = function () {
                a.attr("src", e).removeAttr("" + b._src), a.css("opacity", 1)
            }, d.onerror = function () {
                a.attr("src", c).removeAttr("" + b._src), a.css("opacity", 1)
            }
        }
    }), a.clazz = b
}), M.define("CoverPannel", function (a) {
    var b = function (a) {
        this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            this.isshow = !1, this.id = M.genId("CoverPannel"), this.CoverPannelClickFunctionobj = a
        }, html: function () {
            var a = this, b = [];
            return b.push('<div id="' + a.id + '"  class="mjd-floor cover-pannel displayNone">'), b.push('<div class="cover-floor "></div>'), b.push("</div>"), b.join("")
        }, bindClick: function () {
            var a = this, b = $("#" + a.id);
            b.on("click", function () {
                if (a.CoverPannelClickFunctionobj && a.CoverPannelClickFunctionobj.func) {
                    var b = a.CoverPannelClickFunctionobj.source ? a.CoverPannelClickFunctionobj.source : null;
                    a.CoverPannelClickFunctionobj.func.call(b)
                }
            }), b.on("touchmove", function (a) {
                a.stopPropagation(), a.preventDefault()
            })
        }, isShow: function () {
            var a = this;
            return a.isshow
        }, show: function () {
            var a = this;
            a.isshow = !0, $("#" + a.id).removeClass("displayNone")
        }, hide: function () {
            var a = this;
            a.isshow = !1, $("#" + a.id).addClass("displayNone")
        }
    }), a.clazz = b
});
var slide = function () {
    function a(a) {
        this.elem = a, this.oBox = document.querySelector(a), this.aLi = document.querySelectorAll(a + " [data-ul-child=child]"), this.oUl = document.querySelector(a + " [data-slide-ul=firstUl]"), this.now = 0, this.on0ff = !1
    }

    var b = function (b) {
        return new a(b)
    };
    return a.prototype = {
        init: function (b) {
            var b = b || {};
            this.aLi;
            this.defaults = {
                imgSrc: "imgsrc",
                startIndex: 0,
                loop: !1,
                smallBtn: !1,
                number: !1,
                laseMoveFn: !1,
                location: !1,
                preDef: "lnr",
                autoPlay: !1,
                autoHeight: !1,
                preFn: null,
                lastImgSlider: !1,
                playTime: 6e3,
                callback: null,
                verticalCenter: !1,
                fullScreen: !0,
                total: 0,
                slideLen: 200,
                sliderHtmlH: 640,
                sliderHtmlW: 210
            }, a.extend(this.defaults, b), this.imgSrc = this.defaults.imgSrc, this.now = this.defaults.startIndex, 0 != this.aLi.length && (this.initBtn(), this.liInit(), this.bind(), this.aLi.length < 2 && (this.defaults.smallBtn && (this.oSmallBtn.style.display = "none"), this.defaults.number && (this.pageNub.style.display = "none"), this.defaults.autoPlay = !1, this.defaults.loop = !1), this.defaults.autoPlay && (this.pause(), this.play()))
        }, initBtn: function () {
            this.aLi = document.querySelectorAll(this.elem + " [data-ul-child=child]");
            var b = this.aLi;
            if (this.defaults.callback && this.defaults.callback(1), this.defaults.smallBtn) {
                this.oSmallBtn = document.querySelector(this.elem + ' [data-small-btn="smallbtn"]'), this.oSmallBtn.innerHTML = this.addSmallBtn(), this.btns = document.querySelectorAll(this.elem + ' [data-ol-btn="btn"]');
                for (var c = 0; c < this.btns.length; c++)this.btns[c].className = "";
                this.btns[a.getNow(this.now, b.length)].className = "active"
            }
            this.defaults.number && (this.pageNub = document.getElementById("page-nub"), this.slideNub = document.getElementById("slide-nub"), this.slideSum = document.getElementById("slide-sum"), this.slideNub.innerHTML = (this.now + 1) % this.aLi.length, this.slideSum.innerHTML = this.aLi.length), this.defaults.total = this.aLi.length, 2 != this.aLi.length && 3 != this.aLi.length || (this.defaults.loop && (this.oUl.innerHTML += this.oUl.innerHTML), this.aLi = document.querySelectorAll(this.elem + " [data-ul-child=child]"), this.need = !0)
        }, bind: function () {
            var b = this.oBox, c = a._device();
            c.hasTouch || (b.style.cursor = "pointer", b.ondragstart = function (a) {
                return !a
            });
            var d = "onorientationchange" in window, e = d ? "orientationchange" : "resize";
            return window.addEventListener(e, this), this.aLi.length < 2 ? (this.defaults.smallBtn && (this.oSmallBtn.style.display = "none"), void(this.defaults.number && (this.pageNub.style.display = "none"))) : (b.addEventListener(c.startEvt, this), window.addEventListener("touchcancel", this), void(navigator.userAgent.indexOf("baidubrowser") != -1 ? (window.addEventListener("focusin", this), window.addEventListener("focusout", this)) : (window.addEventListener("blur", this), window.addEventListener("focus", this))))
        }, liInit: function () {
            var b = this.aLi, c = b.length, d = this.aLi[0].offsetWidth, e = this.aLi[0].offsetHeight, f = this.oUl, g = this.oBox.offsetWidth, h = 320, i = 320, j = this.now, k = this;
            this.defaults.preFn && this.defaults.preFn();
            for (var l = 0; l < c; l++)a.setStyle(b[l], {
                WebkitTransition: "all 0ms ease",
                transition: "all 0ms ease",
                height: "auto"
            });
            if (this.defaults.fullScreen) {
                if (f.style.width = g * c + "px", this.defaults.autoHeight) {
                    h = this.oBox.offsetWidth, h >= 640 && (h = 640);
                    for (var l = 0; l < c; l++)b[l].style.width = h + "px";
                    var m = b[0].getElementsByTagName("img")[0];
                    if (m) {
                        var n = new Image;
                        n.onload = function () {
                            k.oBox.style.height = b[0].offsetHeight + "px", k.oUl.style.height = b[0].offsetHeight + "px", k.oBox.style.height.replace("px", "") >= document.documentElement.clientHeight || !k.defaults.verticalCenter ? (k.oBox.parentNode.style.top = "50px", k.oBox.parentNode.style.marginTop = 0) : (k.oBox.parentNode.style.top = "50%", k.oBox.parentNode.style.marginTop = "-50%")
                        }, n.src = m.src
                    } else this.oBox.style.height = b[0].offsetHeight + "px"
                }
            } else {
                i = document.body.offsetWidth, i >= 640 && (i = 640), d = i / 320 * 255, e = i / 320 * 170;
                for (var l = 0; l < c; l++)b[l].style.width = d + "px", b[l].style.height = e + "px";
                f.style.width = d * c + "px", this.oBox.style.height = e + "px", this.oUl.style.height = e + "px", b[0].style.padding = "0", g = d
            }
            if (this.defaults.loop)for (var l = 0; l < c; l++)a.setStyle(b[l], {
                position: "absolute",
                left: 0,
                top: 0
            }), l == a.getNow(j, c) ? (this.loadImg(b[l]), a.setStyle(b[l], {
                WebkitTransform: "translate3d(0px, 0px, 0px)",
                transform: "translate3d(0px, 0px, 0px)",
                zIndex: 10
            })) : l == a.getPre(j, c) ? a.setStyle(b[l], {
                WebkitTransform: "translate3d(" + -g + "px, 0px, 0px)",
                transform: "translate3d(" + -g + "px, 0px, 0px)",
                zIndex: 10
            }) : l == a.getNext(j, c) ? a.setStyle(b[l], {
                WebkitTransform: "translate3d(" + g + "px, 0px, 0px)",
                transform: "translate3d(" + g + "px, 0px, 0px)",
                zIndex: 10
            }) : l == a.getNextNew(j, c) ? a.setStyle(b[l], {
                WebkitTransform: "translate3d(" + 2 * g + "px, 0px, 0px)",
                transform: "translate3d(" + 2 * g + "px, 0px, 0px)",
                zIndex: 10
            }) : a.setStyle(b[l], {
                WebkitTransform: "translate3d(" + -g + "px, 0px, 0px)",
                transform: "translate3d(" + -g + "px, 0px, 0px)",
                zIndex: 9
            }); else for (var l = 0; l < c; l++)a.setStyle(b[l], {
                WebkitTransform: "translate3d(" + j * -g + "px, 0px, 0px)",
                transform: "translate3d(" + j * -g + "px, 0px, 0px)"
            })
        }, handleEvent: function (b) {
            var c = a._device();
            this.oBox;
            switch (b.type) {
                case c.startEvt:
                    this.defaults.autoPlay && this.pause(), this.startHandler(b);
                    break;
                case c.moveEvt:
                    this.defaults.autoPlay && this.pause(), this.moveHandler(b);
                    break;
                case c.endEvt:
                    this.defaults.autoPlay && (this.pause(), this.play()), this.endHandler(b);
                    break;
                case"touchcancel":
                    this.defaults.autoPlay && (this.pause(), this.play()), this.endHandler(b);
                    break;
                case"orientationchange":
                    this.orientationchangeHandler();
                    break;
                case"resize":
                    this.orientationchangeHandler();
                    break;
                case"focus":
                    this.defaults.autoPlay && (this.pause(), this.play());
                    break;
                case"blur":
                    this.defaults.autoPlay && this.pause();
                    break;
                case"focusin":
                    this.defaults.autoPlay && (this.pause(), this.play());
                    break;
                case"focusout":
                    this.defaults.autoPlay && this.pause()
            }
        }, startHandler: function (b) {
            this.on0ff = !0;
            var c = a._device(), d = c.hasTouch, e = this.oBox, f = this.now, g = this.aLi;
            e.addEventListener(c.moveEvt, this), e.addEventListener(c.endEvt, this), this.downTime = Date.now(), this.downX = d ? b.targetTouches[0].pageX : b.clientX - e.offsetLeft, this.downY = d ? b.targetTouches[0].pageY : b.clientY - e.offsetTop, this.startT = a.getTranX(g[a.getNow(f, g.length)]), this.startNowT = a.getTranX(g[a.getNow(f, g.length)]), this.startPreT = a.getTranX(g[a.getPre(f, g.length)]), this.startNextT = a.getTranX(g[a.getNext(f, g.length)]), this.startNextN = a.getTranX(g[a.getNextNew(f, g.length)]), a.stopPropagation(b)
        }, moveHandler: function (b) {
            var c = this.oBox, d = a._device();
            if (this.on0ff) {
                var e = d.hasTouch, f = e ? b.targetTouches[0].pageX : b.clientX - c.offsetLeft, g = e ? b.targetTouches[0].pageY : b.clientY - c.offsetTop, h = this.aLi, i = h.length, j = this.now, k = h[0].offsetWidth;
                "all" == this.defaults.preDef && a.stopDefault(b);
                for (var l = 0; l < i; l++)a.setStyle(h[l], {
                    WebkitTransition: "all 0ms ease",
                    transition: "all 0ms ease"
                });
                if (Math.abs(f - this.downX) < Math.abs(g - this.downY))"tnd" == this.defaults.preDef && "all" != this.defaults.preDef && a.stopDefault(b); else if (Math.abs(f - this.downX) > 10)if ("lnr" == this.defaults.preDef && "all" != this.defaults.preDef && a.stopDefault(b), this.defaults.loop) {
                    p = (this.startNowT + f - this.downX).toFixed(4);
                    var m = (this.startPreT + f - this.downX).toFixed(4), n = (this.startNextT + f - this.downX).toFixed(4), o = (this.startNextN + f - this.downX).toFixed(4);
                    a.move(h[a.getNow(j, i)], p, 10, this.defaults.fullScreen), a.move(h[a.getPre(j, i)], m, 10, this.defaults.fullScreen), a.move(h[a.getNext(j, i)], n, 10, this.defaults.fullScreen), a.move(h[a.getNextNew(j, i)], o, 10, this.defaults.fullScreen)
                } else {
                    var p = a.getTranX(h[j]);
                    if (p > 0)for (var q = ((this.startT + f - this.downX) / 3).toFixed(4), l = 0; l < i; l++)a.move(h[l], q); else if (Math.abs(p) >= Math.abs((i - 1) * k)) {
                        for (var q = (this.startT + (f - this.downX) / 3).toFixed(4), l = 0; l < i; l++)a.move(h[l], q);
                        if (this.defaults.laseMoveFn && "function" == typeof this.defaults.laseMoveFn) {
                            var r = (q - this.startT).toFixed(4);
                            this.defaults.laseMoveFn(r)
                        }
                    } else for (var q = (this.startT + f - this.downX).toFixed(4), l = 0; l < i; l++)a.move(h[l], q)
                }
            } else c.removeEventListener(d.moveEvt, this), c.removeEventListener(d.endEvt, this);
            a.stopPropagation(b)
        }, endHandler: function (b) {
            b.stopPropagation(), this.on0ff = !1;
            var c = Date.now(), d = a._device(), e = d.hasTouch, f = this.oBox, g = e ? b.changedTouches[0].pageX : b.clientX - f.offsetLeft, h = e ? b.changedTouches[0].pageY : b.clientY - f.offsetTop, i = this.aLi, j = i[0].offsetWidth, k = a.getTranX(i[a.getNow(this.now, i.length)]);
            return g - this.downX < 30 && g - this.downX >= 0 && Math.abs(h - this.downY) < 30 ? (this.tab(k, "+="), "click") : g - this.downX > -30 && g - this.downX <= 0 && Math.abs(h - this.downY) < 30 ? (this.tab(k, "-="), "click") : Math.abs(h - this.downY) - Math.abs(g - this.downX) > 30 && g - this.downX < 0 ? void this.tab(k, "-=") : Math.abs(h - this.downY) - Math.abs(g - this.downX) > 30 && g - this.downX > 0 ? void this.tab(k, "+=") : g < this.downX ? this.downX - g > j / 3 || c - this.downTime < 200 ? (this.now++, this.tab(k, "++"), "left") : (this.tab(k, "+="), "stay") : g - this.downX > j / 3 || c - this.downTime < 200 ? (this.now--, this.tab(k, "--"), "right") : (this.tab(k, "-="), "stay")
        }, tab: function (b, c, d) {
            function e() {
                i.defaults.location && b < -(g - 1) * h - h / 5 && i.defaults.lastImgSlider && "function" == typeof i.defaults.lastImgSlider && (i.defaults.laseMoveFn(0), i.defaults.lastImgSlider()), f[a.getNow(i.now, g)].removeEventListener("webkitTransitionEnd", e, !1), f[a.getNow(i.now, g)].removeEventListener("transitionend", e, !1)
            }

            var f = this.aLi, g = f.length, h = f[0].offsetWidth, i = (this.oBox, a._device(), this), j = this.now;
            if (!this.defaults.callback || "++" != c && "--" != c || this.defaults.callback((a.getNow(j, g) + 1) % this.defaults.total == 0 ? this.defaults.total : (a.getNow(j, g) + 1) % this.defaults.total), $(f[a.getNow(i.now, g)]).addClass("active").siblings().removeClass("active"), this.loadImg(f[a.getNow(i.now, g)]), this.loadImg(f[a.getNow(i.now + 1, g)]), this.defaults.loop) {
                j < 0 && (j = g - 1, this.now = g - 1);
                for (var k = 0; k < g; k++)if (k == a.getPre(j, g)) {
                    var l;
                    switch (c) {
                        case"++":
                            l = 300;
                            break;
                        case"--":
                            l = 0;
                            break;
                        case"+=":
                            l = 0;
                            break;
                        case"-=":
                            l = 300
                    }
                    a.setStyle(f[a.getPre(j, g)], {
                        WebkitTransform: "translate3d(" + -h + "px, 0px, 0px)",
                        transform: "translate3d(" + -h + "px, 0px, 0px)",
                        zIndex: 10,
                        WebkitTransition: "all " + l + "ms ease",
                        transition: "all " + l + "ms ease"
                    }), i.defaults.fullScreen || a.setStyle(f[a.getPre(j, g)], {padding: "0.8%"})
                } else if (k == a.getNow(j, g))a.setStyle(f[a.getNow(j, g)], {
                    WebkitTransform: "translate3d(0px, 0px, 0px)",
                    transform: "translate3d(0px, 0px, 0px)",
                    zIndex: 10,
                    WebkitTransition: "all 300ms ease",
                    transition: "all 300ms ease"
                }), i.defaults.fullScreen || a.setStyle(f[a.getNow(j, g)], {padding: "0"}); else if (k == a.getNext(j, g)) {
                    var l = 300;
                    a.setStyle(f[a.getNext(j, g)], {
                        WebkitTransform: "translate3d(" + h + "px, 0px, 0px)",
                        transform: "translate3d(" + h + "px, 0px, 0px)",
                        zIndex: 10,
                        WebkitTransition: "all " + l + "ms ease",
                        transition: "all " + l + "ms ease"
                    }), i.defaults.fullScreen || a.setStyle(f[a.getNext(j, g)], {padding: "0.8%"})
                } else if (k == a.getNextNew(j, g)) {
                    var l;
                    switch (c) {
                        case"++":
                            l = 0;
                            break;
                        case"--":
                            l = 300;
                            break;
                        case"+=":
                            l = 300;
                            break;
                        case"-=":
                            l = 0
                    }
                    a.setStyle(f[a.getNextNew(j, g)], {
                        WebkitTransform: "translate3d(" + 2 * h + "px, 0px, 0px)",
                        transform: "translate3d(" + 2 * h + "px, 0px, 0px)",
                        zIndex: 10,
                        WebkitTransition: "all " + l + "ms ease",
                        transition: "all " + l + "ms ease"
                    }), i.defaults.fullScreen || a.setStyle(f[a.getNextNew(j, g)], {padding: "0.8%"})
                } else a.setStyle(f[k], {
                    WebkitTransform: "translate3d(" + 2 * h + "px, 0px, 0px)",
                    transform: "translate3d(" + 2 * h + "px, 0px, 0px)",
                    zIndex: 9,
                    WebkitTransition: "all 0ms ease",
                    transition: "all 0ms ease"
                })
            } else {
                for (var k = 0; k < g; k++)a.setStyle(f[k], {
                    WebkitTransition: "all 300ms ease",
                    transition: "all 300ms ease"
                });
                j <= 0 && (j = 0, this.now = 0), j > g - 1 && (d ? (j = 0, this.now = 0) : (j = g - 1, this.now = g - 1));
                for (var m = 0; m < g; m++)a.setStyle(f[m], {
                    WebkitTransform: "translate3d(" + -j * h + "px, 0px, 0px)",
                    transform: "translate3d(" + -j * h + "px, 0px, 0px)"
                })
            }
            if (this.defaults.smallBtn) {
                for (var k = 0; k < this.btns.length; k++)this.btns[k].className = "";
                this.need ? this.btns[a.getNow(j, g / 2)].className = "active" : this.btns[a.getNow(j, g)].className = "active"
            }
            this.defaults.number && (this.slideNub.innerHTML = (a.getNow(j, g) + 1) % this.defaults.total == 0 ? this.defaults.total : (a.getNow(j, g) + 1) % this.defaults.total), f[a.getNow(j, g)].addEventListener("webkitTransitionEnd", e, !1), f[a.getNow(j, g)].addEventListener("transitionend", e, !1)
        }, play: function () {
            var a = this;
            a.timer = setInterval(function () {
                a.now++, a.tab(null, "++", !0)
            }, this.defaults.playTime)
        }, pause: function () {
            var a = this;
            clearInterval(a.timer)
        }, orientationchangeHandler: function () {
            var a = this;
            setTimeout(function () {
                a.liInit()
            }, 300)
        }, addSmallBtn: function () {
            for (var a = "", b = this.aLi, c = 0; c < b.length; c++)a += c == this.defaults.startIndex ? '<span class="active" data-ol-btn="btn"></span>' : '<span data-ol-btn="btn"></span>';
            return a
        }, checkIphone: function () {
            var a = window.navigator.userAgent.toLowerCase();
            return !!/iphone|ipd|ipod/.test(a)
        }, setImgURL: function (a) {
            var b = this, c = a.attr("" + b.imgSrc);
            2 * parseInt(b.defaults.sliderHtmlW), 2 * parseInt(b.defaults.sliderHtmlH);
            return c.indexOf(".webp") != -1 || b.checkIphone() || (c += ".webp"), c
        }, changSrc: function (a) {
            var b = this, c = a.attr("" + b.imgSrc), d = new Image;
            $(a).parents("ul").find("li");
            if (c)var e = b.setImgURL(a);
            a.css("opacity", 0), d.src = e, d.onload = function () {
                a.attr("src", e).removeAttr("" + b.imgSrc).css("opacity", 1)
            }, d.onerror = function () {
                a.attr("src", c).removeAttr("" + b.imgSrc).css("opacity", 1)
            }
        }, loadImg: function (a) {
            var b = this, c = $(a).find("img"), d = $(a).find("img").attr("" + b.imgSrc);
            d && b.changSrc(c)
        }, show: function () {
            this.oBox.style.display = "inline-block"
        }, hide: function () {
            this.oBox.style.display = "none"
        }
    }, a.extend = function (a, b) {
        for (name in b)void 0 !== b[name] && (a[name] = b[name])
    }, a.extend(a, {
        setStyle: function (a, b) {
            for (name in b)a.style[name] = b[name]
        }, getTranX: function (a) {
            var b = a.style.WebkitTransform || a.style.transform, c = b.indexOf("translate3d("), d = parseInt(b.substring(c + 12, b.length - 13));
            return d
        }, _device: function () {
            var a = !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), b = a ? "touchstart" : "mousedown", c = a ? "touchmove" : "mousemove", d = a ? "touchend" : "mouseout";
            return {hasTouch: a, startEvt: b, moveEvt: c, endEvt: d}
        }, getNow: function (a, b) {
            return a % b
        }, getPre: function (a, b) {
            if (a % b - 1 < 0)var c = b - 1; else var c = a % b - 1;
            return c
        }, getNext: function (a, b) {
            var c = (a + 1) % b;
            return c
        }, getNextNew: function (a, b) {
            var c = (a + 2) % b;
            return c
        }, move: function (b, c, d, e) {
            var f = d || null;
            if (f && (b.style.zIndex = f), a.setStyle(b, {
                    WebkitTransform: "translate3d(" + c + "px, 0px, 0px)",
                    transform: "translate3d(" + c + "px, 0px, 0px)"
                }), !e) {
                var g = parseFloat(c) / 100;
                g > .8 ? g = .8 : -.8 < g < 0 ? g = -g : g <= -.8 && (g = .8), a.setStyle(b, {padding: g + "%"})
            }
        }, stopDefault: function (a) {
            return a && a.preventDefault ? a.preventDefault() : window.event.returnValue = !1, !1
        }, stopPropagation: function (a) {
            a && a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0
        }
    }), b
}();
M.define("choosePannel", function (a) {
    var b = function (a) {
        this.clientW = document.documentElement.clientWidth || document.body.clientWidth, this.container = document.querySelector("#chooseHead"), this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            var b = this, c = a || {};
            b.defaults = {
                headData: [],
                clickfn: null,
                clickli: null,
                expandfn: null,
                tag: "discount",
                hasHtml: !1
            }, M.object["extends"](b.defaults, c), b.baseId = "choosePannel", b.chooseId = M.genId(this.baseId), b.btnIconId = M.genId(this.baseId), b.pannelListId = M.genId(this.baseId), b.chooseTitleId = M.genId(this.baseId), b.flagId = b.defaults.tag, b.PATHS = "./../../.."
        }, html: function () {
            var a = this, b = [], c = this.defaults.headData, d = c.length;
            if (0 != d && !a.defaults.hasHtml) {
                b.push('<div class="choose-pannel-open">'), b.push('<div class="choose-title displayNone" id="' + this.chooseTitleId + '">为你精选以下标签 </div>'), b.push('<div class="list-pannel" id="' + this.pannelListId + '" > <ul>');
                for (var e = 0; e < d; e++)0 == e ? b.push('<li class="active">' + c[e].cateName + "</li>") : (b.push("<li>" + c[e].cateName), a.checkCate(c, c[e].cateName) && b.push('<em class="new-flag"></em>'), b.push("</li>"));
                b.push("</ul></div></div>"), b.push('<div class="choose-pannel-btn">'), b.push('<span class="btn-pannel btn-line">|<em class="btn-icon " id="' + this.btnIconId + '"><img src="' + a.PATHS + '/i/icon-btn-roll.png?v=1.0"></em></span>'),
                    b.push("</div> ")
            }
            return b.join("")
        }, addClick: function (a, b) {
            var c = this;
            a.addEventListener("click", function (a) {
                return function () {
                    c.switchPannel(), c.defaults.clickli && (c.changeStatus(a), c.defaults.clickli(this, a)), c.clearRedFlag(a)
                }
            }(b))
        }, bind: function () {
            this.registerClick()
        }, checkCate: function (a, b) {
            try {
                var c = this, d = M.localstorage.get(c.flagId + "_headData"), e = [];
                if (d)return d.indexOf(b) == -1;
                for (var f = 0; f < a.length; f++)e.push(a[f].cateName);
                return M.localstorage.set(c.flagId + "_headData", e.join("|")), !1
            } catch (g) {
                return !1
            }
        }, setCach: function (a) {
            try {
                var b = this, c = M.localstorage.get(b.flagId + "_headData");
                c && c.indexOf(a) == -1 && M.localstorage.set(b.flagId + "_headData", c + "|" + a)
            } catch (d) {
            }
        }, clearRedFlag: function (a) {
            var b, c = this.liObjs[a], d = $(c).find(".new-flag");
            d && (d.remove(), b = c.innerText, this.setCach(b))
        }, changeStatus: function (a) {
            var b, c = this;
            if (c.liObjs.length > 0) {
                for (var d = 0; d < c.liObjs.length; d++)b = $(c.liObjs[d]), a == d ? b.addClass("active") : b.removeClass("active");
                c.clearRedFlag(a)
            }
        }, registerClick: function () {
            var a = this, b = document.querySelector("#" + a.btnIconId), c = document.querySelector("#" + a.pannelListId), d = c.style, e = c.offsetHeight;
            if (a.liObjs = document.querySelectorAll("#" + a.pannelListId + " li"), b) {
                a.setAnimation(d, [0, -e, 0], 0);
                var f = setTimeout(function () {
                    d.display = "none", clearTimeout(f)
                }, 300);
                b.addEventListener("click", function (b) {
                    a.switchPannel(), a.defaults.expandfn && a.defaults.expandfn()
                })
            }
            for (var g = 0; g < a.liObjs.length; g++)a.addClick(a.liObjs[g], g)
        }, setAnimation: function (a, b, c) {
            a.webkitTransform = "translate3d(" + b[0] + "px," + b[1] + "px," + b[2] + "px)", a.transform = "translate3d(" + b[0] + "px," + b[1] + "px," + b[2] + "px)", a.mozTransform = "translate3d(" + b[0] + "px," + b[1] + "px," + b[2] + "px)", a.oTransform = "translate3d(" + b[0] + "px," + b[1] + "px," + b[2] + "px)", a.webkitTransition = c + "ms", a.oTransition = c + "ms", a.transition = c + "ms", a.mozTransition = c + "ms"
        }, switchPannel: function () {
            var a, b = this, c = document.querySelector("#" + b.btnIconId), d = document.querySelector("#" + b.pannelListId), e = d.style, f = d.offsetHeight, g = document.querySelector("#" + b.chooseTitleId), h = c.className, i = $(c), j = $(".btn-pannel");
            if (h.indexOf("btn-up") != -1) {
                i.removeClass("btn-up"), i.addClass("btn-down"), j.addClass("btn-line"), b.setAnimation(e, [0, -f, 0], 300);
                var k = setTimeout(function () {
                    e.display = "none", clearTimeout(k)
                }, 300);
                a = setTimeout(function () {
                    $(g).addClass("displayNone"), e.position = "", b.defaults.clickfn("btn-up"), clearTimeout(a)
                }, 50)
            } else b.defaults.clickfn("btn-down"), $(g).removeClass("displayNone"), j.removeClass("btn-line"), i.removeClass("btn-down"), i.addClass("btn-up"), e.position = "static", e.display = "block", a = setTimeout(function () {
                b.setAnimation(e, [0, 0, 0], 300), clearTimeout(a)
            }, 10)
        }, changeFlag: function (a) {
        }
    }), a.clazz = b
}), $(".popup04").bind("click", function () {
    hideWindow()
});
var JDMRegex = function () {
    this.init()
};
JDMRegex.prototype = {
    init: function () {
        this.ruleVerificationCode = /^[a-zA-Z0-9]{3,5}$|^[\u4e00-\u9fa5]{3,5}$|^[\d]{1,3}$/
    }, testVerificationCode: function (a) {
        return this.ruleVerificationCode.test(a)
    }
};
var validateCode = {
    refreshLoginCodeAjax: function (a, b, c, d) {
        $.post(a ? a : "/authCode/createCodeKey.json", {args: d}, function (a) {
            a.codeKey && ($("#" + b).attr("src", "/authCode/authCodeImg.action?key=" + a.codeKey + "&rand=" + validateCode.getRandomNum(1, 1e6)), $("#" + c).val(a.codeKey))
        })
    }, getValidateCode: function (a, b, c) {
        setTimeout(function () {
            validateCode.refreshLoginCodeAjax("", a, b, c)
        }, 500)
    }, getRandomNum: function (a, b) {
        var c = b - a, d = Math.random();
        return a + Math.round(d * c)
    }
};
!function (a) {
    "use strict";
    a.fn.toast = function (a) {
        return new c(this[0], a)
    };
    var b = 0, c = function () {
        var c = function (d, e) {
            return "string" == typeof d || d instanceof String ? this.container = document.getElementById(d) : this.container = d, this.container ? ("string" != typeof e && "number" != typeof e || (e = {message: e}), this.styleType = e.styleType || 1, this.cls = e.cls ? e.cls : "", this.titleName = e.titleName || "", this.subtitle = e.subtitle || "", this.message = e.message || "", this.delay = e.delay || this.delay, this.maxHeight = e.maxHeight ? e.maxHeight : this.maxHeight, this.minHeight = e.minHeight ? e.minHeight : this.minHeight, this.okCallback = e.okCallback ? e.okCallback : this.okCallback, this.oneBtnCallback = e.oneBtnCallback ? e.oneBtnCallback : this.oneBtnCallback, this.btns = e.btns ? e.btns : this.btns, this.okBtnId = e.okBtnId ? e.okBtnId : this.okBtnId, this.txtAlign = e.txtAlign ? e.txtAlign : this.txtAlign, this.btnNum = e.btnNum ? e.btnNum : this.btnNum, this.listContainer = e.listContainer ? e.listContainer : this.listContainer, this.messageColor = e.messageColor ? e.messageColor : this.messageColor, this.btnsReverse = !!e.btnsReverse && e.btnsReverse, this.cancelCallback = !!e.cancelCallback && e.cancelCallback, this.multiSkipLink = !!e.multiSkipLink && e.multiSkipLink, this.willClosePop = !e.willClosePop || e.willClosePop, this.upVal = e.upVal ? e.upVal : this.upVal, this.autoClose = c.judgeOptsValFn(e.autoClose, this.autoClose), this.hasBtns = c.judgeOptsValFn(e.hasBtns, this.hasBtns), this.islimitHeight = c.judgeOptsValFn(e.islimitHeight, this.islimitHeight), this.isMaskClose = c.judgeOptsValFn(e.isMaskClose, this.isMaskClose), this.hasCloseBtn = c.judgeOptsValFn(e.hasCloseBtn, this.hasCloseBtn), this.whiteBg = c.judgeOptsValFn(e.whiteBg, this.whiteBg), this.iskeyboardT = c.judgeOptsValFn(e.iskeyboardT, this.iskeyboardT), this.container = a(this.container), 0 === this.container.find(".mjdToastContainer").length && this.container.append("<div class='mjdToastContainer'></div>"), this.container = this.container.find(".mjdToastContainer"), this.container.removeClass("tr tb br tl tc bc"), void(0 == b && this.show())) : void console.log("error finding container for toast " + d)
        };
        return c.prototype = {
            cls: null,
            titleName: null,
            subtitle: null,
            message: null,
            delay: 2e3,
            styleType: 1,
            el: null,
            container: null,
            listContainer: null,
            timer: null,
            autoClose: !0,
            isMaskClose: !0,
            scrollH: "",
            bodyH: "",
            maxHeight: 0,
            minHeight: 52,
            islimitHeight: !0,
            hasBtns: !0,
            btns: {cancelTxt: "取消", okTxt: "提交"},
            txtAlign: "left",
            btnNum: 0,
            hasCloseBtn: !1,
            whiteBg: !1,
            messageColor: null,
            iskeyboardT: !1,
            upVal: 0,
            okBtnId: "okBtn",
            okCallback: function () {
            },
            cancelCallback: function () {
            },
            oneBtnCallback: function () {
            },
            show: function () {
                var c = this, d = this.addHtml();
                this.el = a(d).get(0), this.container.append(this.el);
                var e = a(c.el), f = e.find(".message-box");
                if (b++, null != c.listContainer) {
                    var g = a(c.listContainer);
                    c.bodyH = g.height(), c.scrollH = document.body.scrollTop
                }
                c.setEvent(e), c.transformFn(e), 1 == c.styleType && (c.islimitHeight = !1), c.islimitHeight && c.setBody(1), c.autoClose && (c.timer = setTimeout(function () {
                    c.hide()
                }, this.delay)), c.iskeyboardT && (c.setBody(1), c.upVal && f.css("marginTop", c.upVal))
            },
            setEvent: function (b) {
                var c = this;
                switch (c.styleType) {
                    case 1:
                        c.isMaskClose && b.bind("click", function () {
                            c.hide()
                        });
                        break;
                    case 2:
                        1 == c.btnNum ? (a(".one-btn-tip-btn").bind("click", function () {
                            c.oneBtnCallback(), c.hide()
                        }), a(".one-btn-tip-btn").bind("touchstart", function () {
                        })) : 2 == c.btnNum && (a(".btn-close").bind("click", function () {
                            c.multiSkipLink && c.cancelCallback(), c.willClosePop && c.hide()
                        }), a(".btn-close").bind("touchstart", function () {
                        }), a(".btn-sure").bind("click", function () {
                            c.okCallback(), c.willClosePop && c.hide()
                        }), a(".btn-sure").bind("touchstart", function () {
                        })), c.hasCloseBtn && (a(".rt-close-btn-wrap").bind("click", function () {
                            c.hide()
                        }), a(".rt-close-btn-wrap").bind("touchstart", function () {
                        }))
                }
            },
            transformFn: function (a) {
                var b = this, c = a.find(".message-txt"), d = a.find(".txt-max-height"), e = a.find(".message-txt-wrapper");
                b.txtAlign && c.css("textAlign", b.txtAlign), b.maxHeight > 0 && d.css({
                    maxHeight: b.maxHeight,
                    overflow: "auto"
                }), b.titleName || e.css("minHeight", b.minHeight)
            },
            setBody: function (b) {
                var c = this, d = document.documentElement.clientHeight, e = a(c.listContainer);
                1 == b ? e.css({height: d, overflow: "hidden"}) : 2 == b && (e.css({
                    height: c.bodyH,
                    overflow: ""
                }), document.body.scrollTop = c.scrollH)
            },
            hide: function () {
                var a = this;
                a.islimitHeight && a.setBody(2), a.iskeyboardT && a.setBody(2), null != a.timer && clearTimeout(a.timer), a.remove()
            },
            remove: function () {
                var c = a(this.el);
                c.remove(), b = 0
            },
            addHtml: function () {
                var a = this, b = "";
                switch (a.styleType) {
                    case 1:
                        b = '<div class="shade-floor">', a.whiteBg ? (b += '<div class="cover-floor"></div>', b += '<div class="message-box content-box whiteBg-box">') : b += '<div class="message-box content-box">', a.cls && (b += '<div class="message-box-icon"><i class="message-icon ' + a.cls + '"></i></div>'), b += '<div class="message-box-content txt-align txt-max-height">' + a.message + "</div>", b += "</div>", b += "</div>";
                        break;
                    case 2:
                        b += '<div class="shade-floor">', b += '<div class="cover-floor"></div>', b += ' <div class="choose-box content-box">', b += '   <div class="message-tip-info">', a.titleName && (b += '<p class="message-main-title">' + a.titleName + "</p>"), a.hasCloseBtn && (b += '<a class="rt-close-btn-wrap"><p class="message-close-btn"></p></a>'), b += '<div class="message-txt-wrapper"><div class="txt-max-height">', a.subtitle && (b += '<p class="message-subtitle">' + a.subtitle + "</p>"), b += a.messageColor ? '<p class="message-txt" style="color:' + a.messageColor + '">' + a.message + "</p></div></div>" : '<p class="message-txt">' + a.message + "</p></div></div>", b += '<div class="freedom-add-wrap"></div>', b += "   </div>", a.hasBtns && a.btnNum && 1 == a.btnNum ? b += '   <div class="one-btn-tip-btn">' + a.btns.okTxt + "</div>" : a.hasBtns && a.btnNum && 2 == a.btnNum && (b += '<div class="choose-box-btn">', a.btnsReverse ? (b += '<a class="btn-sure" id="' + a.okBtnId + '">' + a.btns.okTxt + "</a>", b += '<a class="btn-close">' + a.btns.cancelTxt + "</a>") : (b += '<a class="btn-close">' + a.btns.cancelTxt + "</a>", b += '<a class="btn-sure" id="' + a.okBtnId + '">' + a.btns.okTxt + "</a>"), b += "</div>"), b += " </div></div>"
                }
                return b
            }
        }, c.extend = function (a, b) {
            for (var c in b)void 0 !== b[c] && (a[c] = b[c])
        }, c.extend(c, {
            judgeOptsValFn: function (a, b) {
                return void 0 == a ? b : a
            }
        }), c
    }();
    a.toast = function (b) {
        a(document.body).toast(b)
    }
}($), function (a) {
    "use strict";
    a.fn.loadPage = function (a) {
        return new b(this[0], a)
    };
    var b = function () {
        var b = function (a, b) {
            this.init(b)
        };
        return b.prototype = {
            init: function (b) {
                var c = {
                    containId: "",
                    currentPage: 1,
                    baseUrl: "",
                    reqPara: "",
                    beforeFn: null,
                    successFn: null,
                    errorFn: null,
                    reLoad: !0,
                    isRepeatReq: !1,
                    pageNo: "offset",
                    maxHeightFlag: 0,
                    errorFlag: !1,
                    firstLoad: !0,
                    async: !0,
                    removeEvent: !1
                };
                this.settings = a.extend(c, b), this.currentPage = c.currentPage,
                    this.containId = c.containId, this.objContain = document.querySelector(this.containId),
                    this.categoryId = c.categoryId, this.isFirstNormalTab = c.isFirstNormalTab,
                    this.isFirstNormalTab ? this.currentPage = 2 :
                        (1 == this.currentPage && (/*this.objContain.innerHTML = "", */this.getData(1)),
                            this.currentPage = 2), this.events()
            }, scrollFn: function () {
                var a = this, b = document.querySelector("#mjdContent");
                return b.offsetHeight + b.scrollTop >= b.scrollHeight - 356 && !a.settings.isRepeatReq && !a.settings.errorFlag && !a.settings.isEmpty ? (a.settings.maxHeightFlag = b.scrollHeight, a.getData(a.currentPage++)) : b.offsetHeight + b.scrollTop >= b.scrollHeight - 356 && !a.settings.isRepeatReq && a.settings.errorFlag && a.settings.isEmpty && (a.settings.maxHeightFlag = b.scrollHeight, a.getData(a.currentPage)), !1
            }, bindScrollEvts: function () {
                var b = this, c = document.querySelector("#mjdContent");
                b.settings.removeEvent ? a(c).unbind("scroll") : a(c).unbind("scroll").bind("scroll", b.scrollFn.bind(b))
            }, events: function () {
                this.bindScrollEvts()
            }, getData: function (a, b) {
                this.settings.isRepeatReq || (this.settings.isRepeatReq = !0), this.getSomeData(a)
            }, getSomeData: function (b) {
                var c, d = this, e = d.settings.reqPara;
                c = d.settings.baseUrl + "page=" + b + "&categoryId=" + d.categoryId, a.ajax({
                    url: c,
                    type: d.settings.reqType,
                    dataType: "json",
                    data: e,
                    beforeSend: d.settings.beforeFn,
                    async: d.settings.async,
                    success: function (a) {
                        d.settings.successFn(a, b, d.categoryId), d.settings.reLoad = !1, d.settings.isRepeatReq = !1, d.settings.errorFlag = !1
                    },
                    error: function (a, b) {
                        d.settings.errorFn(), d.settings.isRepeatReq = !1, d.settings.errorFlag = !0, d.settings.isEmpty = !0
                    }
                })
            }
        }, b
    }();
    a.loadPage = function (b) {
        a(document.body).loadPage(b)
    }
}($), M.define("couponlist", function (a) {
    var b = function (a) {
        this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            var b = this;
            b.couponListUl = document.getElementById("couponListUl"), b.ulIndex = 0, b.sid = $(".sid").val(), b.lunboPic = document.getElementById("lunboPic"), b.firstCatergryId = $("#firstCatergryId").val(), b.lastCatergryId = $("#lastCatergryId").val(), slide("#slider").init({
                loop: !0,
                smallBtn: !0,
                autoPlay: !0,
                autoHeight: !0,
                playTime: 3e3
            }), b.callback = a.callback, b.bind(), b.goBack2Top(), b.setHeight()
        }, setHeight: function () {
            var a = document.querySelector("#mjdHeader"), b = document.querySelector("#mjdContent"), c = document.documentElement.clientHeight || document.body.clientHeight;
            b.style.height = c - a.offsetHeight + "px"
        }, discountPing: function (a, b, c) {
            var d = window.location.href;
            M.url.sendPing(a, b, d.split("?")[0], "", c)
        }, checkCouponStatus: function (a) {
           // "2" == $(a).find(".type").val() ? this.discountPing("MProductCoupon_Specialcoupon", $(a).find(".batchId").val()) : "1" == $(a).find(".type").val() && this.discountPing("MProductCoupon_Coupon", $(a).find(".batchId").val()), $(a).find(".coupon-btn-yellow").size() > 0 || $(a).find(".coupon-btn-go-look").size() > 0 ? this.couponJumpBind(a) : this.checkLoginAndPayPwd(a)
        }, checkLoginAndPayPwd: function (a) {
            var b = this, c = ($(a).find(".batchId").val(), $(a).find(".id").val()), d = ($(a).find(".type").val(), $(a).find(".key").val()), e = $(a).find(".roleId").val();
            $(a).find(".to").val(), $(".requestScheme").val() + "://" + $(".requestServerName").val();
            return "true" == $(".openR").val() ? void jQuery.ajax({
                url: "/center/receiveCoupon.json?couponId=" + c + "&roleId=" + e + "&actId=" + d + "&takeRule=5",
                type: "post",
                dataType: "json",
                beforeSend: function (a) {
                },
                success: function (c) {
                    302 == c.status ? window.location.href = c.redirectUrl + "&returnurl=" + urlencode(window.location.href) : void 0 != c.isSuccess && "" != c.isSuccess && "null" != c.isSuccess ? b.receiveCouponResult(a, c) : (hideWindow(), toastError())
                },
                error: function (a) {
                    $(".no-coupon")[0].style.display = "none"
                },
                complete: function (a) {
                }
            }) : (showAlert(), com_jd_passport_m_validateCode("captchas-img", "captchas-codekey", "6"), $(".btn-ensure").unbind("click").bind("click", function () {
                b.discountPing("MProductCoupon_WindowGet"), b.submitWithCaptcha(a)
            }), $(".btn-cancel").unbind("click").bind("click", function () {
                b.discountPing("MProductCoupon_WindowCancel"), hideWindow()
            }), void 0)
        }, submitWithCaptcha: function (a) {
            var b = this, c = $("#captchas-codekey").val().trim(), d = $(".captchas-input").val().match(/\S+/g).join(""), e = $(a).find(".key").val(), f = $(a).find(".roleId").val(), g = $(a).find(".to").val(), h = $(a).find(".id").val();
            b.checkValidateCode() && jQuery.ajax({
                url: "/center/receiveCoupon.json",
                type: "post",
                data: {couponId: h, roleId: f, actId: e, codeKey: c, validateCode: d, to: g, takeRule: "5"},
                dataType: "json",
                beforeSend: function (a) {
                },
                success: function (c) {
                    302 == c.status ? window.location.href = c.redirectUrl + "&returnurl=" + urlencode(window.location.href) : void 0 != c.isSuccess && "" != c.isSuccess && "null" != c.isSuccess ? b.receiveCouponResult(a, c) : (hideWindow(), toastError())
                },
                error: function (a) {
                    toastError()
                },
                complete: function (a) {
                }
            })
        }, checkValidateCode: function () {
            var a = $(".captchas-input").val().match(/\S+/g).join("");
            if ("" == a)return $(".tip-warn").show(), $(".tip-warn").html("验证码不能为空"), $("#captchas-input").val(""), com_jd_passport_m_validateCode("captchas-img", "captchas-codekey", "6"), !1;
            var b = new JDMRegex;
            return !!b.testVerificationCode(a) || ($(".tip-warn").show(), $(".tip-warn").html("验证码格式有误,请重新输入"), $("#captchas-input").val(""), com_jd_passport_m_validateCode("captchas-img", "captchas-codekey", "6"), !1)
        }, receiveCouponResult: function (a, b) {
            var c = this, d = $(a).find(".type").val(), e = $(a).find(".batchId").val(), f = $(a).find(".id").val(), g = e + "_" + f + "_" + d, h = e + "_1_" + f, i = e + "_0_" + f;
            "T" == b.isSuccess ? (hideWindow(), "2" == d ? c.discountPing("MProductCoupon_GetSpecialcoupon", h, "2") : "1" == d && c.discountPing("MProductCoupon_Get", h, "2"), c.discountPing("MProductCoupon_ToastSuccess", g, "2"), toastSuccess(), $(a).find(".change-block").html('<i class="had"></i><span class="coupon-btn-yellow">去使用</span>')) : "CF" == b.isSuccess ? ($(".tip-warn").show(), $(".tip-warn").html(b.desc), $("#captchas-input").val(""), com_jd_passport_m_validateCode("captchas-img", "captchas-codekey", "6")) : "F" == b.isSuccess ? (hideWindow(), "2" == d ? c.discountPing("MProductCoupon_GetSpecialcoupon", i, "2") : "1" == d && c.discountPing("MProductCoupon_Get", i, "2"), c.discountPing("MProductCoupon_WindowFailedIKnow", g, "2"), toast(b.desc)) : "R" == b.isSuccess ? (showAlert(), com_jd_passport_m_validateCode("captchas-img", "captchas-codekey", "6"), $(".btn-ensure").unbind("click").bind("click", function () {
                c.discountPing("MProductCoupon_WindowGet"), c.submitWithCaptcha(a)
            }), $(".btn-cancel").unbind("click").bind("click", function () {
                c.discountPing("MProductCoupon_WindowCancel"), hideWindow()
            })) : "RN" == b.isSuccess && (hideWindow(), $.toast({
                message: b.desc,
                maxHeight: 96,
                styleType: 2,
                autoClose: !1,
                oneBtnCallback: function () {
                    c.discountPing("MProductCoupon_AuthenticationGet")
                },
                btnNum: 1,
                btns: {okTxt: "我知道了"}
            }), "2" == d ? c.discountPing("MProductCoupon_GetSpecialcoupon", i, "2") : "1" == d && c.discountPing("MProductCoupon_Get", i, "2"))
        }, couponJumpBind: function (a) {
            var b = $(a).find(".jumpFlag").val(), c = $(".requestScheme").val() + "://", d = $(".requestServerName").val(), e = c + d, f = $(".okUrl").val(), g = "", h = 5;
            switch (b) {
                case"0":
                    g = c + "home.m.jd.com/wallet/coupons.action";
                    break;
                case"1":
                    g = $(a).find(".jumpUrl").val(), h = 1;
                    break;
                case"2":
                    var i = $(a).find(".shopId").val();
                    g = f, g = g.replace("%s", i), h = 2;
                    break;
                case"3":
                    g = c + "newcz.m.jd.com/";
                    break;
                case"4":
                    g = c + "cz.m.jd.com/flow.html";
                    break;
                case"7":
                    g = c + "m.movie.jd.com/";
                    break;
                case"8":
                    g = c + "jipiao.m.jd.com/";
                    break;
                case"9":
                    var j = $(a).find(".batchId").val(), k = "", l = 1, m = $(a).find(".sortType").val();
                    if ("0" == m)l = 2, k = $(a).find(".denomination").val(); else {
                        if ("1" != m) {
                            toast("此优惠券暂时不能跳转使用，去试试别的优惠券吧");
                            break
                        }
                        l = 1, k = $(a).find(".quota").val() + "_" + $(a).find(".denomination").val()
                    }
                    g = "true" == $(".jumpToSo").val() ? "//so.m.jd.com/list/couponSearch.action?couponbatch=" + j : e + "/ware/getWareCollection?coupon_batch=" + j + "&from=1&tips=" + k + "&couponType=" + l, h = 3;
                    break;
                case"10":
                    g = e + "/seckill/seckillList", h = 4;
                    break;
                default:
                    toast("此优惠券暂时不能跳转使用，去试试别的优惠券吧")
            }
            var n = $(a).find(".type").val();
            "" != g && ("2" == n ? this.discountPing("MProductCoupon_SpecialcouponUse", h, "3") : "1" == n && this.discountPing("MProductCoupon_CouponUse", h, "3"), setTimeout(function () {
                location.href = g
            }, 100))
        }, loaddingContent: function (a, b, c) {
            for (var d = this, e = "", f = 0; f < a.couponItem.length; f++)e += a.couponItem[f] && "0" == a.couponItem[f].sortType ? '<li class="coupon-red">' : a.couponItem[f] && "1" == a.couponItem[f].sortType ? '<li class="coupon-blue">' : a.couponItem[f] && "2" == a.couponItem[f].sortType ? '<li class="coupon-freeCarriage">' : '<li style="display:none">', e += '<a class="coupon-a" >', e += '<div class="coupon-left">', a.couponItem[f] && "1" == a.couponItem[f].ynLabel && (e += '<div  class="active-pic"><i></i><span>' + a.couponItem[f].labelText + "</span></div>"), e += '<div class="triangle-border-left"><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i></div>', a.couponItem[f] && a.couponItem[f].androidImgUrl && (e += '<div class="img-div-backg"><div class="img-div"><img _src="' + a.couponItem[f].androidImgUrl.replace("http://", "//").replace("https://", "//") + '" src="../../images/coupon/loading-list.png"></div></div>'), e += '<div class="pro-content"><span class="pro-info">', a.couponItem[f] && "2" == a.couponItem[f].sortType ? e += a.couponItem[f].limitStr ? a.couponItem[f].limitStr : a.freeDesc && a.freeDesc.freeInfo ? a.freeDesc.freeInfo : "限京东自营商品运费（部分特殊商品运费除外）" : a.couponItem[f] && a.couponItem[f].limitStr && (e += a.couponItem[f].limitStr), e += "</span>", e += '<div class="pro-price">', a.couponItem[f] && "2" == a.couponItem[f].sortType ? (e += '<span class="big-price free-c">', e += a.couponItem[f] && a.couponItem[f].denoString ? a.couponItem[f].denoString : a.freeDesc && a.freeDesc.priceInfo ? a.freeDesc.priceInfo : "6", e += "</span>", e += '<span class="price-info">', a.couponItem[f] && a.couponItem[f].quotaString && (e += a.couponItem[f].quotaString), e += "</span>") : a.couponItem[f] && 3 == a.couponItem[f].couponStyle ? (e += '<span class="big-discount-price">' + a.couponItem[f].denoString + "</span>", e += '<span class="price-info">折 ', a.couponItem[f] && a.couponItem[f].quotaString && (e += a.couponItem[f].quotaString), e += "</span>") : (e += '<span class="big-price">', e += a.couponItem[f] && a.couponItem[f].denoString ? a.couponItem[f].denoString : a.freeDesc && a.freeDesc.priceInfo ? a.freeDesc.priceInfo : "6", e += "</span>", e += '<span class="price-info">', a.couponItem[f] && a.couponItem[f].quotaString && (e += a.couponItem[f].quotaString), e += "</span>"), e += "</div></div></div>", e += '<div class="coupon-right"><div class="triangle-border-right"><em class="circular0"></em><em class="circular1"></em><em class="circular2"></em><em class="circular3"></em><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i></div>', e += '<div class="change-block">', a.couponItem[f] && 0 == a.couponItem[f].receiveFlag ? a.couponItem[f] && 0 == a.couponItem[f].state ? e += '<div class="progress-bar-block"><div class="progress-bar"><span style="width:' + a.couponItem[f].rate + '%"></span></div></div><span class="progress-text">已抢&nbsp;' + a.couponItem[f].rate + '%</span><span class="coupon-btn">立即领取</span>' : a.couponItem[f] && 1 == a.couponItem[f].state && (e += '<div class="progress-bar-block"><div class="progress-bar"><span style="width:100%"></span></div></div><span class="progress-text">全部抢完</span><span class="coupon-btn-go-look">进场看看</span>') : a.couponItem[f] && 1 == a.couponItem[f].receiveFlag && (e += '<i class="had"></i><span class="coupon-btn-yellow">去使用</span>'), e += "</div>", e += "</div>", a.couponItem[f] && (e += '<input type="hidden" class="jumpFlag" value="' + a.couponItem[f].jumpFlag + '">', e += '<input type="hidden" class="batchId" value="' + a.couponItem[f].batchId + '">', e += '<input type="hidden" class="id" value="' + a.couponItem[f].id + '">', e += '<input type="hidden" class="key" value="' + a.couponItem[f].key + '">', e += '<input type="hidden" class="roleId" value="' + a.couponItem[f].roleId + '">'), e += b == d.firstCatergryId ? '<input type="hidden" class="type" value="2">' : '<input type="hidden" class="type" value="1">', a.couponItem[f] && (e += '<input type="hidden" class="sortType" value="' + a.couponItem[f].sortType + '">', e += '<input type="hidden" class="denomination" value="' + a.couponItem[f].denomination + '">', e += '<input type="hidden" class="quota" value="' + a.couponItem[f].quota + '">', e += '<input type="hidden" class="quotaString" value="' + a.couponItem[f].quotaString + '">', e += '<input type="hidden" class="jumpUrl" value="' + a.couponItem[f].jumpUrl + '">', e += '<input type="hidden" class="shopId" value="' + a.couponItem[f].shopId + '">', e += '<input type="hidden" class="denoString" value="' + a.couponItem[f].denoString + '">'), e += "</a></li>";
            $(d.couponListUl).append(e), b == d.firstCatergryId ? $("#clickChange")[0].style.display = "block" : $("#clickChange")[0].style.display = "none";
            var g = setTimeout(function () {
                c(), clearTimeout(g)
            }, 200)
        }, loadSlidePic: function (a) {
            for (var b = this, c = '<div class="slide-container"><div id="slider" class="slider-wrapper"><ul id="slider_touch02" class="new-slide" data-slide-ul="firstUl">', d = 0; d < a.length && d < 12; d++)a[d].androidImg && (c += 0 == d ? '<li data-ul-child="child" class="slide-li"><a _href="' + a[d].jumpUrl + '"><img src="' + a[d].androidImg.replace("http://", "//").replace("https://", "//") + '"></a></li>' : '<li data-ul-child="child" class="slide-li"> <a _href="' + a[d].jumpUrl + '"> <img imgsrc="' + a[d].androidImg.replace("http://", "//").replace("https://", "//") + '"></a></li>');
            c += '</ul> <div class="focus-btn" data-small-btn="smallbtn"></div></div></div>', $("#lunboPic").html(c), slide("#slider").init({
                loop: !0,
                smallBtn: !0,
                autoPlay: !0,
                autoHeight: !0,
                playTime: 3e3
            }), b.bindBanner()
        }, bindBanner: function () {
            var a = this;
            $(".slide-li a").unbind("click").bind("click", function () {
                a.discountPing("MProductCoupon_PopBanner", "", "3");
                var b = this, c = setTimeout(function () {
                    window.location.href = $(b).attr("_href"), clearTimeout(c)
                }, 200)
            })
        }, loadList: function (a, b) {
            var c = $(".is-loading-b")[0], d = this, e = "", f = !0;
            if (a == d.firstCatergryId) {
                e = "/center/toHandpickList.json?batchStr=" + $(".jxSetTopCoupon").val() + "&";
                var f = !1
            } else {
                e = "/center/toCouponList.json?";
                var f = !1
            }
            $.loadPage({
                containId: "#couponListUl__nonono",
                reqType: "get",
                baseUrl: e,
                currentPage: 1,
                categoryId: a,
                removeEvent: f,
                isFirstNormalTab: b,
                beforeFn: function () {
                   // $("#clickChange")[0].getAttribute("style").indexOf("block") != -1
                   // && $(".no-coupon")[0].getAttribute("style").indexOf("block") != -1
                   // ||
                    (c.style.display = "block")
                },
                successFn: function (a, b, e) {
                    var f = document.querySelector("#mjdContent");
                   // 1 != b || a && a.couponItem && 0 != a.couponItem.length ? !(b > 1) || a && a.couponItem && 0 != a.couponItem.length ? 1 == b && a.couponItem.length <= 10 ? (c.style.display = "none", d.loaddingContent(a, e, d.callback), e != d.lastCatergryId && ($("#clickChange")[0].style.display = "block"), $(".no-coupon")[0].style.display = "none", d.bind()) : ($(".no-coupon")[0].style.display = "none", $("#clickChange")[0].style.display = "none", d.loaddingContent(a, e, d.callback), d.bind(), c.style.display = "none") : (c.style.display = "none", e != d.lastCatergryId && ($("#clickChange")[0].style.display = "block"), $(".no-coupon")[0].style.display = "none", $(f).unbind("scroll")) : (c.style.display = "none", d.discountPing("MProductCoupon_WindowIKnow"), $(".no-coupon")[0].style.display = "block", $(f).unbind("scroll"), $("#clickChange")[0].style.display = "none"), a.activityItem && a.activityItem.length > 0 && a.activityItem[0] && a.activityItem[0].androidImg && d.loadSlidePic(a.activityItem)
                },
                errorFn: function () {
                    var a = setTimeout(function () {
                        c && (c.style.display = "none"), clearTimeout(a)
                    }, 1e3)
                }
            })
        }, bind: function () {
            var a = this;
            $(".coupon-blue a").unbind("click").bind("click", function () {
                a.checkCouponStatus(this)
            }), $(".coupon-red a").unbind("click").bind("click", function () {
                a.checkCouponStatus(this)
            }), $(".coupon-freeCarriage a").unbind("click").bind("click", function () {
                a.checkCouponStatus(this)
            })
        }, goBack2Top: function () {
            var a = document.querySelector("#indexToTop"), b = "click", c = (window.navigator.userAgent, document.querySelector("#mjdContent")), d = {
                init: function () {
                    d.scrollEvt(), d.toTopEvt()
                }, toTopEvt: function () {
                    a.addEventListener(b, function () {
                        c.scrollTop = 0, a.style.display = "none"
                    }, !1)
                }, scrollEvt: function () {
                    c.addEventListener("scroll", function () {
                        var b = c.offsetHeight, d = c.scrollTop;
                        d > 2 * b ? a.style.display = "block" : a.style.display = "none"
                    }, !1)
                }
            };
            return d.init()
        }
    }), a.clazz = b
}), M.define("couponMain", function (a) {
    var b = function (a) {
        this.container = document.querySelector("#mjdContainer"), this.cHeaderContainer = document.querySelector("#chooseHead"), this.init(a)
    };
    M.object.merge(b.prototype, {
        init: function (a) {
            var b = this;
            b.baseId = "couponMain", b.couponMainId = M.genId(this.baseId), b.indexs = 0, b.isFirstLoad = !0, b.cateData = a.cateList ? a.cateList || [] : b.getLidata();
            var c = {
                bg: $(".appBanner-bg").val(),
                content1: $(".appBanner-content1").val(),
                content2: $(".appBanner-content2").val(),
                fontSizeOne: $(".appBanner-fontSizeOne").val(),
                fontSizeTwo: $(".appBanner-fontSizeTwo").val(),
                colorOne: $(".appBanner-colorOne").val(),
                colorTwo: $(".appBanner-colorTwo").val(),
                logo: $(".appBanner-logo").val(),
                icon: $(".appBanner-icon").val(),
                iconColor: $(".appBanner-iconColor").val()
            };
            b.appdownInit(c), b.coverPannel = new (M.exports("CoverPannel").clazz)({
                func: function () {
                    b.choosePannel.switchPannel()
                }
            }), $(b.container).append(b.coverPannel.html()), b.coverPannel.bindClick(), b.ImgLoading = new (M.exports("img_loading").clazz)({
                scrollObj: ".mjd-content",
                rangeH: 300,
                duration: 100
            }), b.listData = new (M.exports("couponlist").clazz)({
                callback: function () {
                    b.ImgLoading.bind(), b.ImgLoading.loading()
                }
            }), b.listData.bindBanner(), b.chooseHead = new (M.exports("swip_head").clazz)({
                headData: b.cateData,
                startIndex: 0,//$("#beginTab").attr("beginTabIndex") - 1,
                autoScroll: !0,
                showLen: 4,
                marginLen: 0,
                right: 40,
                moveIndex: 2,
                delay: 200,
                isStaticWidth: !0,
                hasHtml: !0,
                clickBoforefn: function () {
                    $(".tab-jingxuan").removeClass("active"), b.isFirstLoad = !1
                },
                callback: function (a) {
                    a.index < a.maxNum - 3 ? (b.indexs = a.index, $(".next-bar-link ").show(), $(".bar-link").show(), $("#page-next em").html(a.liName.cateName + "-折扣榜单")) : $(".bar-link").hide();
                    var c = b.cateData[a.index].cateId, d = $("#lunboPic"), e = $("#firstCatergryId").val();
                    if (b.isFirstLoad) {
                        var f = !0;
                        b.listData.loadList(c, f)
                    } else d.empty(), c == e ? $("#clickChange")[0].style.display = "block" : $("#clickChange")[0].style.display = "none", b.listData.loadList(c);
                    b.isFirstLoad || "nextClick" == a.actionType || b.discountPing("MProductCoupon_Tab", c, ""), b.choosePannel.changeStatus(a.index)
                },
                swipendfn: function () {
                    b.discountPing("MProductCoupon_TabSlide", "", "")
                }
            }), b.choosePannel = new (M.exports("choosePannel").clazz)({
                headData: b.cateData,
                hasHtml: !0,
                expandfn: function () {
                    b.discountPing("MProductCoupon_Pull", "", "")
                },
                clickfn: function (a) {
                    "btn-up" == a ? ($(".choose-pannel-jx").css("display", "block"), b.chooseHead.show(), b.coverPannel.hide()) : ($(".choose-pannel-jx").css("display", "none"), b.chooseHead.hide(), b.coverPannel.show())
                },
                clickli: function (a, c) {
                    b.isFirstLoad = !1, b.chooseHead.swipMove(c, "swip"), b.discountPing("MProductCoupon_Class", $(a).attr("cateid"), ""), 0 == c && $(".tab-jingxuan").addClass("active")
                }
            }), $(b.cHeaderContainer).append(b.choosePannel.html()), b.choosePannel.bind()
        }, getLidata: function () {
            var a, b = $(".choose-nav-iteam"), c = [];
            if (b)for (var d = 0; d < b.length; d++)a = $(b[d]).find(".pos-re"), c.push({
                cateId: a.attr("cateid"),
                cateName: a.html()
            });
            return c
        }, discountPing: function (a, b, c) {
            var d = window.location.href;
            M.url.sendPing(a, b, d.split("?")[0], "", c)
        }, appdownInit: function (a) {
            var b = this;
            a && (b.downloadAppImg = a.bg || "../../images/coupon/download-bg.png", b.downloadAppContentUP = a.content1 || "打开京东APP购物", b.downloadAppContentDown = a.content2 || "新人领188元红包", b.fontSizeOne = a.fontSizeOne ? "font-size:" + parseInt(a.fontSizeOne / 2) + ";" : "", b.fontSizeTwo = a.fontSizeTwo ? "font-size:" + parseInt(a.fontSizeTwo / 2) + ";" : "", b.colorOne = a.colorOne ? "color" + a.colorOne + ";" : "", b.colorTwo = a.colorTwo ? "color" + a.colorTwo + ";" : "", b.downloadApplogo = a.logo || "../../images/coupon/top-jdlogo.png", b.downloadAppBtnContent = a.icon || "立即打开", b.iconColor = a.iconColor ? "color" + a.iconColor + ";" : "")
        }, appdownHtml: function () {
            var a = this, b = [];
            return a.downloadAppImg ? (b.push('<div id="layout_appdown" class="download-pannel" style="z-index:199">'), b.push('<div class="pannel-bg"><img src="' + a.downloadAppImg + '"></div>')) : (b.push('<div id="layout_appdown" class="download-pannel download-noBg">'), b.push('<div class="pannel-bg"><img /></div>')), b.push('<div id="layout_close_appdown" class="download-close"><img src="../../images/coupon/icon-close.png"></div>'), b.push('<div class="download-logo"><img src="' + a.downloadApplogo + '"></div>'), b.push('<div class="download-txt">'), b.push('    <span class="download-content">'), b.push('        <em style="' + a.fontSizeOne + a.colorOne + '" class="content-up">' + a.downloadAppContentUP + "</em>"), b.push('        <em  style="' + a.fontSizeTwo + a.colorTwo + '" class="content-down">' + a.downloadAppContentDown + "</em>"), b.push("    </span>"), b.push("</div>"), b.push('<div  id="layout_open_app" class="download-action">'), a.downloadAppBtnContent.length > 4 ? b.push('    <span style="" class="">' + a.downloadAppBtnContent + "</span>") : b.push('    <span style="' + a.iconColor + '" class="font-large">' + a.downloadAppBtnContent + "</span>"), b.push("</div>"), b.push("</div>"), b.join("")
        }, appdownBind: function () {
            var a = {
                openAppBtnId: "layout_open_app",
                closePanelBtnId: "layout_close_appdown",
                closePanelId: "layout_appdown",
                noRecord: !0,
                inteneUrl: "openApp.jdMobile://virtual?",
                inteneUrlParams: {
                    category: "jump",
                    des: "couponCenter",
                    sourceValue: "sourceValue_test",
                    sourceType: "sourceType_test"
                },
                downAppURl: "//h5.m.jd.com/active/download/download.html?channel=jd-mso",
                downWeixin: "//h5.m.jd.com/active/download/download.html?channel=jd-mso"
            }, b = $;
            b.downloadAppPlugIn(a)
        }, appdownRender: function () {
            var a = this, b = a.appdownHtml();
            $("#layout_appdown_view").html(b), a.appdownBind()
        }, bind: function () {
            var a = this;
            $(".tab-jingxuan").bind("click", function () {
                a.isFirstLoad = !1, a.chooseHead.swipMove(0, ""), $(this).addClass("active")
            }), $("#clickChange").unbind("click").bind("click", function () {
                a.discountPing("MProductCoupon_Next"), a.chooseHead.swipMove(a.indexs + 1, "nextClick")
            })
        }, run: function () {
            var a = this;
            "true" == $(".isOpenAppBanner").val() && "true" == $(".mDownLayer").val() && a.appdownRender(), a.bind()
        }
    }), a.clazz = b
}), $(function () {
    var a = {
        inteneUrl: "openApp.jdMobile://virtual?",
        inteneUrlParams: {
            category: "jump",
            des: "couponCenter",
            sourceValue: "sourceValue_test",
            sourceType: "sourceType_test"
        },
        NoJumpDownLoadPage: !0,
        M_sourceFrom: "lingquan"
    };
    //$.downloadAppPlugInOpenApp(a)
});